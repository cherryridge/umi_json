{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "title": "Schema for pack `manifest.json`",
    "type": "object",
    "additionalProperties": false,
    "required": ["formatVersion", "nameSpace", "uuid", "minEngineVersion", "version", "entryPoint"],
    "properties": {
        "formatVersion": {
            "type": "integer",
            "const": 1
        },
        "nameSpace": {
            "type": "string",
            "minLength": 1
        },
        "uuid": {
            "type": "string",
            "format": "uuid"
        },
        "minEngineVersion": {
            "type": "integer",
            "minimum": 1
        },
        "version": {
            "type": "integer",
            "minimum": 1
        },
        "entryPoint": {
            "type": "string",
            "minLength": 1
        },
        "name": {
            "type": "string",
            "default": "Content Pack",
            "minLength": 1
        },
        "description": {
            "type": "string",
            "default": "This content pack has no description."
        },
        "authors": {
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "type": "string",
                "minLength": 1
            },
            "default": []
        },
        "configs": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "namespaceCollision": {
                    "type": "string",
                    "enum": ["ignore", "warn", "fail"],
                    "default": "warn"
                },
                "alwaysLoad": {
                    "type": "boolean",
                    "default": false
                },
                "licenseLibre": {
                    "type": "boolean",
                    "default": false
                },
                "allowDynamicCode": {
                    "type": "boolean",
                    "default": false
                }
            },
            "default": {
                "namespaceCollision": "warn",
                "alwaysLoad": false,
                "licenseLibre": false,
                "allowDynamicCode": false
            }
        },
        "dependencies": {
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "required": ["uuid"],
                "properties": {
                    "uuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "minVersion": {
                        "type": "integer",
                        "minimum": 1,
                        "default": 0
                    },
                    "maxVersion": {
                        "type": "integer",
                        "minimum": 1,
                        "default": 0
                    }
                }
            },
            "default": []
        },
        "knownIncompatibilities": {
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "required": ["uuid"],
                "properties": {
                    "uuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "minVersion": {
                        "type": "integer",
                        "minimum": 1,
                        "default": 0
                    },
                    "maxVersion": {
                        "type": "integer",
                        "minimum": 1,
                        "default": 0
                    }
                }
            },
            "default": []
        },
        "customOptions": {
            "type": "array",
            "uniqueItems": true,
            "minItems": 1,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "required": ["identifier", "type", "default"],
                "properties": {
                    "identifier": {
                        "type": "string",
                        "minLength": 1
                    },
                    "type": {
                        "type": "string",
                        "enum": ["string", "integer", "float", "boolean"]
                    },
                    "default": {},
                    "min": {},
                    "max": {}
                },
                "allOf": [
                    {
                        "if": {
                            "required": ["type"],
                            "properties": { "type": { "const": "integer" }}
                        },
                        "then": {
                            "required": ["min", "max"],
                            "properties": {
                                "default": { "type": "integer" },
                                "min": { "type": "integer" },
                                "max": { "type": "integer" }
                            }
                        }
                    },
                    {
                        "if": {
                            "required": ["type"],
                            "properties": { "type": { "const": "float" }}
                        },
                        "then": {
                            "required": ["min", "max"],
                            "properties": {
                                "default": { "type": "number" },
                                "min": { "type": "number" },
                                "max": { "type": "number" }
                            }
                        }
                    },
                    {
                        "if": { "not": {
                            "required": ["type"],
                            "properties": { "type": { "enum": ["integer", "float"]}}
                        }},
                        "then": { "not": { "anyOf": [
                            {"required": ["min"]},
                            {"required": ["max"]}
                        ]}}
                    },
                    {
                        "if": {
                            "required": ["type"],
                            "properties": { "type": { "const": "string" }}
                        },
                        "then": { "properties": { "default": { "type": "string" }}}
                    },
                    {
                        "if": {
                            "required": ["type"],
                            "properties": { "type": { "const": "boolean" }}
                        },
                        "then": { "properties": { "default": { "type": "boolean" }}}
                    }
                ]
            },
            "default": []
        }
    }
}